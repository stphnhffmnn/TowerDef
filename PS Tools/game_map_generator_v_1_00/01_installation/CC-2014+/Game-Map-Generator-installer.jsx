function showDialog(){var _0xfa54x1= new File($["fileName"]);var _0xfa54x2=_0xfa54x1["parent"];var _0xfa54x3=false;var _0xfa54x4= new Window("dialog","Game Map Generator - Installation complete",undefined,{borderless:false});_0xfa54x4["spacing"]= 0;_0xfa54x4["preferredSize"]= {width:400,height:350};_0xfa54x4["margins"]= [2,2,2,2];_0xfa54x4["alignChildren"]= "fill";var _0xfa54x5=_0xfa54x4["add"]("image",undefined,File(_0xfa54x2+ "/Game_Map_Generator/img/010_install/install_bg.png"));var _0xfa54x6=_0xfa54x4["add"]("group");_0xfa54x6["margins"]= 0;_0xfa54x6["spacing"]= 0;var _0xfa54x7=_0xfa54x6["add"]("image",undefined,File(_0xfa54x2+ "/Game_Map_Generator/img/010_install/btn_space.png"));var _0xfa54x8=File(_0xfa54x2+ "/Game_Map_Generator/img/010_install/btn_close.png");var _0xfa54x9=_0xfa54x6["add"]("iconbutton",undefined,_0xfa54x8,{style:"toolbutton"});_0xfa54x9["margins"]= 0;_0xfa54x9["titleLayout"]= {margins:[0,0,0,0]};_0xfa54x9["onClick"]= function(){_0xfa54x4["close"]()};_0xfa54x4["center"]();beep();_0xfa54x4["show"]()}var G,PSInstaller,PSU,e,errorMessage,psInstaller;if($["os"]["match"](/windows/i)== "Windows"){var userFolder=(Folder["myDocuments"]["fsName"]).toString()["replace"](/\\/g,"/");var userTempFolder=userFolder+ "/GameMapGeneratorTemp";inputFolder=  new Folder(userTempFolder);inputFolder["create"]()}else {if($["os"]["match"](/Macintosh/i)== "Macintosh"){var userFolder=(Folder["myDocuments"]["fsName"]);var userTempFolder=userFolder+ "/GameMapGeneratorTemp";inputFolder=  new Folder(userTempFolder);inputFolder["create"]()}};G= {COMPANY:"Orange_Box",CONTACT_INFO:"http://graphicriver.net/user/orange_box",PRODUCT_NAME:"Game Map Generator",PRODUCT_ID:"game_map_generator.extension",PRODUCT_VERSION:"1.00",MIN_VERSION:void((14.0)),MAX_VERSION:void((0)),HTML_PANEL:"Game_Map_Generator",SYSTEM_INSTALL:false,INSTALLER_VERSION:"0.1.1",ENABLE_LOG:false,LOG_FILE_PATH:"~/Desktop",LOG_FILE:"",IGNORE:void((0)),CURRENT_PATH:File($["fileName"])["path"],CURRENT_PS_VERSION:app["version"]["split"](".")[0]};PSU= (function(_0xfa54x12){var _0xfa54x13,_0xfa54x14,_0xfa54x15,_0xfa54x16,_0xfa54x17,_0xfa54x18,_0xfa54x19,_0xfa54x1a;_0xfa54x19= this;this["enableLog"]= void((0));this["logFile"]= void((0));this["logFilePointer"]= void((0));_0xfa54x17= function(){return $["os"]["match"](/windows/i)};_0xfa54x16= function(){return !_0xfa54x17()};_0xfa54x1a= function(_0xfa54x1b,_0xfa54x1c){if(_0xfa54x1c== null){_0xfa54x1c= ""};return Error["runtimeError"](9002,""+ _0xfa54x1c+ "\""+ _0xfa54x1b+ "\": "+ _0xfa54x1b["error"]+ ".")};_0xfa54x14= function(e){var _0xfa54x1d,_0xfa54x1e;_0xfa54x1d= !e["fileName"]?"???":decodeURI(e["fileName"]);_0xfa54x1e= "\x09Message: "+ e["message"]+ "\n\x09File: "+ _0xfa54x1d+ "\n\x09Line: "+ (e["line"]|| "???")+ "\n\x09Error Name: "+ e["name"]+ "\n\x09Error Number: "+ e["number"];if($["stack"]){_0xfa54x1e+= "\x09"+ $["stack"]};return _0xfa54x1e};_0xfa54x18= function(_0xfa54x1c){var _0xfa54x1f;if(!_0xfa54x19["enableLog"]){return};_0xfa54x1f= _0xfa54x19["logFilePointer"];if(!_0xfa54x1f["open"]("e")){_0xfa54x1a(_0xfa54x1f,"Unable to open Log file")};_0xfa54x1f["seek"](0,2);if(!_0xfa54x1f["writeln"](""+ _0xfa54x1c)){return _0xfa54x1a(_0xfa54x1f,"Unable to write to log file")}};_0xfa54x13= function(_0xfa54x20){var _0xfa54x21;if(_0xfa54x20== null){Error["runtimeError"](19,"No Folder name specified")};if(_0xfa54x20["constructor"]=== String){_0xfa54x20=  new Folder(_0xfa54x20)};if(_0xfa54x20 instanceof  File){return _0xfa54x13(_0xfa54x20["parent"])};if(_0xfa54x20["exists"]){return true};if(!(_0xfa54x20 instanceof  Folder)){_0xfa54x18(_0xfa54x20["constructor"]);Error["runtimeError"](21,"Folder is not a Folder?")};if((_0xfa54x20["parent"]!= null)&& !_0xfa54x20["parent"]["exists"]){if(!_0xfa54x13(_0xfa54x20["parent"])){return false}};_0xfa54x21= _0xfa54x20["create"]();if(!_0xfa54x21){Error["runtimeError"](9002,"Unable to create folder "+ _0xfa54x20+ " ("+ _0xfa54x20["error"]+ ")\nPlease create it manually and run this script again.")};return _0xfa54x21};_0xfa54x15= function(_0xfa54x22,_0xfa54x23){var _0xfa54x1f;if(!_0xfa54x23){return};_0xfa54x19["enableLog"]= _0xfa54x23;_0xfa54x19["logFile"]= _0xfa54x22;_0xfa54x1f=  new File(_0xfa54x19["logFile"]);if(_0xfa54x1f["exists"]){_0xfa54x1f["remove"]()};if(!_0xfa54x1f["open"]("w")){_0xfa54x1a(_0xfa54x1f,"Unable to open Log file")};if(_0xfa54x16()){_0xfa54x1f["lineFeed"]= "unix"};_0xfa54x19["logFilePointer"]= _0xfa54x1f};return {"isMac":_0xfa54x16,"exceptionMessage":_0xfa54x14,"log":_0xfa54x18,"createFolder":_0xfa54x13,"init":_0xfa54x15}})(this);PSInstaller= (function(){function PSInstaller(){G["LOG_FILE"]= ""+ G["LOG_FILE_PATH"]+ "/"+ G["PRODUCT_NAME"]+ ".log";PSU["init"](G.LOG_FILE,G.ENABLE_LOG);this["productsToInstall"]= [];this["foldersList"]= [];this["installedFiles"]= [];this["installedFolders"]= [];PSU["log"]("=======================================\n "+ ( new Date())+ "\n \x09Company: "+ G["COMPANY"]+ "\n \x09Product: "+ G["PRODUCT_NAME"]+ "\n \x09Product version: "+ G["PRODUCT_VERSION"]+ "\n \x09App: "+ BridgeTalk["appName"]+ "\n \x09App Version: "+ app["version"]+ "\n \x09OS: "+ $["os"]+ "\n \x09Locale: "+ $["locale"]+ "\n ---------------------------------------\n \x09Installer Version: "+ G["INSTALLER_VERSION"]+ "\n =======================================");return}PSInstaller["prototype"]["preflight"]= function(){var _0xfa54x24;G["MIN_VERSION"]= G["MIN_VERSION"]|| 0;G["MAX_VERSION"]= G["MAX_VERSION"]|| 99;PSU["log"]("\nPreflight \n----------------------------");if((G["MIN_VERSION"]<= (_0xfa54x24= G["CURRENT_PS_VERSION"])&& _0xfa54x24<= G["MAX_VERSION"])){PSU["log"]("OK: PS version "+ G["CURRENT_PS_VERSION"]+ " in the range ["+ G["MIN_VERSION"]+ ", "+ G["MAX_VERSION"]+ "]");return true}else {PSU["log"]("\nFAIL: PS version "+ G["CURRENT_PS_VERSION"]+ " not in the range ["+ G["MIN_VERSION"]+ ", "+ G["MAX_VERSION"]+ "]");return Error["runtimeError"](9002,"Bad Photoshop version.\n"+ G["CURRENT_PS_VERSION"]+ " not in the range ["+ G["MIN_VERSION"]+ ", "+ G["MAX_VERSION"]+ "]")}};PSInstaller["prototype"]["init"]= function(){var _0xfa54x25,_0xfa54x26,_0xfa54x19,_0xfa54x27,_0xfa54x28,_0xfa54x24;_0xfa54x19= this;_0xfa54x25= {"10":["SCRIPT","MAC_PLUGIN","WIN_PLUGIN","EXTRA"],"11":["FLASH_PANEL","SCRIPT","MAC_PLUGIN","WIN_PLUGIN","EXTRA"],"12":["FLASH_PANEL","SCRIPT","MAC_PLUGIN","WIN_PLUGIN","EXTRA"],"13":["FLASH_PANEL","SCRIPT","MAC_PLUGIN","WIN_PLUGIN","EXTRA"],"14":["HTML_PANEL"],"15":["HTML_PANEL"],"16":["HTML_PANEL"],"17":["HTML_PANEL"]};this["productsToInstall"]= _0xfa54x25[G["CURRENT_PS_VERSION"]];PSU["log"]("\nItems to be installed \n----------------------------");_0xfa54x24= this["productsToInstall"];for(_0xfa54x27= 0,_0xfa54x28= _0xfa54x24["length"];_0xfa54x27< _0xfa54x28;_0xfa54x27++){_0xfa54x26= _0xfa54x24[_0xfa54x27];PSU["log"]("- "+ _0xfa54x26)}};PSInstaller["prototype"]["copy"]= function(){var _0xfa54x29,_0xfa54x2a,_0xfa54x2b,_0xfa54x2c,_0xfa54x2d,_0xfa54x2e,_0xfa54x2f,_0xfa54x30,_0xfa54x31,_0xfa54x32,_0xfa54x26,_0xfa54x33,_0xfa54x34,_0xfa54x35,_0xfa54x19,_0xfa54x27,_0xfa54x36,_0xfa54x28,_0xfa54x37,_0xfa54x24,_0xfa54x38,_0xfa54x39;_0xfa54x19= this;_0xfa54x2b= function(_0xfa54x3a,_0xfa54x3b,_0xfa54x3c){var _0xfa54x3d,_0xfa54x3e,_0xfa54x3f,_0xfa54x40,_0xfa54x41,_0xfa54x42;_0xfa54x3d= decodeURI(_0xfa54x3a).toString()["split"]("/");_0xfa54x41= decodeURI(_0xfa54x3b).toString()["split"]("/");_0xfa54x42= decodeURI(_0xfa54x3c).toString()["split"]("/");_0xfa54x41["splice"](0,_0xfa54x42["length"]);_0xfa54x3e= _0xfa54x3d["concat"](_0xfa54x41);_0xfa54x40= _0xfa54x3e["join"]("/");_0xfa54x3f= Folder(_0xfa54x40);if(!_0xfa54x3f["exists"]){_0xfa54x3f["create"]()};PSU["log"]("Created Folder:\x09"+ _0xfa54x3f["fsName"]);_0xfa54x19["installedFolders"]["push"](""+ _0xfa54x3f["fsName"]);return _0xfa54x3f};_0xfa54x2f= function(_0xfa54x43){var _0xfa54x44,_0xfa54x45,_0xfa54x46,_0xfa54x27,_0xfa54x28;if(_0xfa54x43["constructor"]=== String){_0xfa54x43=  new Folder(_0xfa54x43)};_0xfa54x46= _0xfa54x43["getFiles"]();_0xfa54x44= 0;for(_0xfa54x27= 0,_0xfa54x28= _0xfa54x46["length"];_0xfa54x27< _0xfa54x28;_0xfa54x27++){_0xfa54x45= _0xfa54x46[_0xfa54x27];if(_0xfa54x45 instanceof  Folder){_0xfa54x19["foldersList"]["push"](_0xfa54x45);PSU["log"]("Folder: "+ _0xfa54x45["fsName"]);_0xfa54x2f(_0xfa54x45)}}};_0xfa54x2a= function(_0xfa54x47,_0xfa54x43){var _0xfa54x48,_0xfa54x1f,_0xfa54x49,_0xfa54x27,_0xfa54x36,_0xfa54x28,_0xfa54x37,_0xfa54x39;_0xfa54x49= [];for(_0xfa54x27= 0,_0xfa54x28= _0xfa54x47["length"];_0xfa54x27< _0xfa54x28;_0xfa54x27++){_0xfa54x1f= _0xfa54x47[_0xfa54x27];_0xfa54x49["push"](decodeURI(_0xfa54x1f))};_0xfa54x39= [];for(_0xfa54x36= 0,_0xfa54x37= _0xfa54x49["length"];_0xfa54x36< _0xfa54x37;_0xfa54x36++){_0xfa54x48= _0xfa54x49[_0xfa54x36];if(File(_0xfa54x48)["exists"]){File(_0xfa54x48)["copy"](""+ _0xfa54x43+ "/"+ (File(_0xfa54x48)["name"]));_0xfa54x19["installedFiles"]["push"](""+ _0xfa54x43+ "/"+ (File(_0xfa54x48)["name"]));_0xfa54x39["push"](PSU["log"]("Copied:\x09\x09"+ (File(_0xfa54x48)["name"])))}else {_0xfa54x39["push"](void((0)))}};return _0xfa54x39};_0xfa54x24= this["productsToInstall"];_0xfa54x39= [];for(_0xfa54x27= 0,_0xfa54x28= _0xfa54x24["length"];_0xfa54x27< _0xfa54x28;_0xfa54x27++){_0xfa54x26= _0xfa54x24[_0xfa54x27];if(!G[_0xfa54x26]){PSU["log"]("\n"+ _0xfa54x26+ " - Nothing to install\n");continue};switch(_0xfa54x26){case "SCRIPT":_0xfa54x34= ""+ app["path"]+ "/"+ (localize("$$$/ScriptingSupport/InstalledScripts=Presets/Scripts"));_0xfa54x2d= ""+ _0xfa54x34+ "/"+ G["COMPANY"]+ "/"+ G["PRODUCT_NAME"];break;case "FLASH_PANEL":_0xfa54x31= ""+ (G["SYSTEM_INSTALL"]?Folder["commonFiles"]:Folder["userData"])+ "/Adobe/CS"+ (G["CURRENT_PS_VERSION"]- 7)+ "ServiceManager/extensions";_0xfa54x2d= ""+ _0xfa54x31+ "/"+ G["PRODUCT_ID"];break;case "HTML_PANEL":_0xfa54x31= ""+ (G["SYSTEM_INSTALL"]?Folder["commonFiles"]:Folder["userData"])+ "/Adobe/"+ (G["CURRENT_PS_VERSION"]=== "14"?"CEPServiceManager4":"CEP")+ "/extensions";_0xfa54x2d= ""+ _0xfa54x31+ "/"+ G["PRODUCT_ID"];break;case "MAC_PLUGIN":if($["os"]["match"](/windows/i)){_0xfa54x2d= "";break};_0xfa54x32= ""+ app["path"]+ "/"+ (localize("$$$/private/Plugins/DefaultPluginFolder=Plug-Ins"));_0xfa54x2d= ""+ _0xfa54x32+ "/"+ G["COMPANY"];break;case "WIN_PLUGIN":if(!$["os"]["match"](/windows/i)){_0xfa54x2d= "";break};_0xfa54x32= ""+ app["path"]+ "/"+ (localize("$$$/private/Plugins/DefaultPluginFolder=Plug-Ins"));_0xfa54x2d= ""+ _0xfa54x32+ "/"+ G["COMPANY"];break;case "EXTRA":_0xfa54x2d= G["EXTRA"]};if(_0xfa54x2d=== ""){continue};PSU["log"]("\n\nAdding "+ _0xfa54x26+ "\n----------------------------\nDestination folder: "+ (Folder(_0xfa54x2d)["fsName"]));if(PSU["createFolder"](_0xfa54x2d)){PSU["log"]("Destination Folder successfully created.\n")}else {PSU["log"]("ERROR! Can't create destination folder.")};_0xfa54x35= Folder(""+ G["CURRENT_PATH"]+ "/"+ G[_0xfa54x26]);_0xfa54x2c= Folder(_0xfa54x2d);this["foldersList"]= [];PSU["log"]("List of Folders to be copied for the "+ _0xfa54x26+ ":");_0xfa54x2f(_0xfa54x35);this["foldersList"]["unshift"](_0xfa54x35);PSU["log"]("Folder: "+ _0xfa54x35);PSU["log"]("\nCreating Folders in destination and copying files:\n");_0xfa54x30= G["IGNORE"]? new RegExp(G["IGNORE"]["join"]("|"),"i"): new RegExp("$.");_0xfa54x38= this["foldersList"];for(_0xfa54x36= 0,_0xfa54x37= _0xfa54x38["length"];_0xfa54x36< _0xfa54x37;_0xfa54x36++){_0xfa54x2e= _0xfa54x38[_0xfa54x36];_0xfa54x33= _0xfa54x2b(_0xfa54x2c,_0xfa54x2e,_0xfa54x35);_0xfa54x29= _0xfa54x2e["getFiles"](function(_0xfa54x1b){if(_0xfa54x1b instanceof  Folder){return false}else {if((_0xfa54x1b["name"]["match"](_0xfa54x30))!= null){return false};return true}});if(_0xfa54x29["length"]){_0xfa54x2a(_0xfa54x29,_0xfa54x33)}};_0xfa54x39["push"](PSU["log"]("\nEnded copying files for "+ _0xfa54x26+ "."))};return _0xfa54x39};PSInstaller["prototype"]["wrapUp"]= function(){showDialog();if(G["README"]){}};PSInstaller["prototype"]["createUninstaller"]= function(){var _0xfa54x4a,_0xfa54x4b;_0xfa54x4a= function(_0xfa54x47,_0xfa54x4c){var e,_0xfa54x48,_0xfa54x2e,_0xfa54x1f,_0xfa54x43,_0xfa54x4d,_0xfa54x4e,_0xfa54x27,_0xfa54x36,_0xfa54x28;if(!(_0xfa54x4d= confirm(""+ G["PRODUCT_NAME"]+ " Version "+ G["PRODUCT_VERSION"]+ " Uninstaller\nAre you sure to remove "+ G["PRODUCT_NAME"]+ "?"))){return};_0xfa54x4e= false;G["LOG_FILE"]= ""+ G["LOG_FILE_PATH"]+ "/"+ G["PRODUCT_NAME"]+ " Uninstaller.log";PSU["init"](G.LOG_FILE,true);PSU["log"]("=======================================\n "+ ( new Date())+ "\n \x09Company: "+ G["COMPANY"]+ "\n \x09Product: "+ G["PRODUCT_NAME"]+ "\n \x09Product version: "+ G["PRODUCT_VERSION"]+ "\n \x09App: "+ BridgeTalk["appName"]+ "\n \x09App Version: "+ app["version"]+ "\n \x09OS: "+ $["os"]+ "\n \x09Locale: "+ $["locale"]+ "\n ---------------------------------------\n \x09Installer Version: "+ G["INSTALLER_VERSION"]+ "\n =======================================");PSU["log"]("\nRemoving FILES...");for(_0xfa54x27= 0,_0xfa54x28= _0xfa54x47["length"];_0xfa54x27< _0xfa54x28;_0xfa54x27++){_0xfa54x48= _0xfa54x47[_0xfa54x27];try{_0xfa54x1f= File(_0xfa54x48);PSU["log"]("Removing:\x09"+ _0xfa54x1f["fsName"]+ "...");_0xfa54x1f["remove"]();PSU["log"]("Done!")}catch(_error){e= _error;PSU["log"]("ERROR!");_0xfa54x4e= true}};PSU["log"]("---------------------------------------\n Removing FOLDERS...");for(_0xfa54x36= _0xfa54x4c["length"]- 1;_0xfa54x36>= 0;_0xfa54x36+=  -1){_0xfa54x2e= _0xfa54x4c[_0xfa54x36];try{_0xfa54x43= Folder(_0xfa54x2e);PSU["log"]("Removing:\x09"+ _0xfa54x43["fsName"]+ "...");_0xfa54x43["remove"]();PSU["log"]("Done!")}catch(_error){e= _error;PSU["log"]("ERROR!");_0xfa54x4e= true};if(_0xfa54x4e){alert("Something went wrong!\nA uninstallation LOG file has been created in:\n"+ G["LOG_FILE"]+ ", please send it to "+ G["CONTACT_INFO"]);throw Error("Restart Photoshop and see if the product has been uninstalled anyway.")}};uninstalled= true;return alert(""+ G["PRODUCT_NAME"]+ " successfully Removed\nPlease Restart Photoshop for the changes to take effect.")};_0xfa54x4b=  new File(""+ userTempFolder+ "/"+ G["PRODUCT_NAME"]+ "_V"+ G["PRODUCT_VERSION"]+ " - UNINSTALLER.jsx");if(!_0xfa54x4b["open"]("w")){throwFileError(_0xfa54x4b,"Unable to Write the Uninstaller file")};if(PSU["isMac"]()){_0xfa54x4b["lineFeed"]= "unix"};_0xfa54x4b["writeln"]("var G = "+ (G["toSource"]()));_0xfa54x4b["writeln"]("var PSU=(function(GLOBAL){var createFolder,exceptionMessage,init,isMac,isWindows,log,that,throwFileError;that=this;this.enableLog=void 0;this.logFile=void 0;this.logFilePointer=void 0;isWindows=function(){return $.os.match(/windows/i);};isMac=function(){return!isWindows();};throwFileError=function(f,msg){if(msg==null){msg='';}return Error.runtimeError(9002,''+msg+''+f+': '+f.error+'.');};exceptionMessage=function(e){var fname,str;fname=!e.fileName?'???':decodeURI(e.fileName);str='  Message: '+e.message+'  File: '+fname+'\\tLine: '+(e.line||'???')+'\\n\\tError Name: '+e.name+'\\n\\tError Number: '+e.number;if($.stack){str+='  '+$.stack;}return str;};log=function(msg){var file;if(!that.enableLog){return;}file=that.logFilePointer;if(!file.open('e')){throwFileError(file,'Unable to open Log file');}file.seek(0,2);if(!file.writeln(''+msg)){return throwFileError(file,'Unable to write to log file');}};createFolder=function(fptr){var rc;if(fptr==null){Error.runtimeError(19,'No Folder name specified');}if(fptr.constructor===String){fptr=new Folder(fptr);}if(fptr instanceof File){return createFolder(fptr.parent);}if(fptr.exists){return true;}if(!(fptr instanceof Folder)){log(fptr.constructor);Error.runtimeError(21,'Folder is not a Folder?');}if((fptr.parent!=null)&&!fptr.parent.exists){if(!createFolder(fptr.parent)){return false;}}rc=fptr.create();if(!rc){Error.runtimeError(9002,'Unable to create folder '+fptr+' ('+fptr.error+') Please create it manually and run this script again.');}return rc;};init=function(logFile,isLogEnabled){var file;if(!isLogEnabled){return;}that.enableLog=isLogEnabled;that.logFile=logFile;file=new File(that.logFile);if(file.exists){file.remove();}if(!file.open('w')){throwFileError(file,'Unable to open Log file');}if(isMac()){file.lineFeed='unix';}that.logFilePointer=file;};return{'isMac':isMac,'exceptionMessage':exceptionMessage,'log':log,'createFolder':createFolder,'init':init};})(this);");_0xfa54x4b["writeln"]("var filesToRemove = "+ (this["installedFiles"]["toSource"]())+ ";");_0xfa54x4b["writeln"]("var foldersToRemove = "+ (this["installedFolders"]["toSource"]())+ ";");_0xfa54x4b["writeln"]("var uninstall = "+ (_0xfa54x4a["toSource"]())+ ";");_0xfa54x4b["writeln"]("uninstall(filesToRemove, foldersToRemove);");return _0xfa54x4b["close"]()};return PSInstaller})();try{psInstaller=  new PSInstaller();psInstaller["preflight"]();psInstaller["init"]();psInstaller["copy"]();psInstaller["createUninstaller"]();psInstaller["wrapUp"]()}catch(_error){e= _error;errorMessage= "Installation failed: "+ (PSU["exceptionMessage"](e));PSU["log"](errorMessage);alert("Something went wrong!\n"+ errorMessage+ "\nPlease contact "+ G["CONTACT_INFO"]+ ", thank you.")};"psInstaller"